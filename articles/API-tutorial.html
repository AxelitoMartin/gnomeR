<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>API-tutorial • gnomeR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="API-tutorial">
<meta property="og:description" content="gnomeR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gnomeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/API-tutorial.html">API-tutorial</a>
    </li>
    <li>
      <a href="../articles/Analizing-genomic-data.html">Analizing genomic data</a>
    </li>
    <li>
      <a href="../articles/Data-processing.html">Data-processing</a>
    </li>
    <li>
      <a href="../articles/Visualizations.html">Visualizations</a>
    </li>
    <li>
      <a href="../articles/gnomeR-vignette.html">gnomeR for IMPACT data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/AxelitoMartin/gnomeR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="API-tutorial_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>API-tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AxelitoMartin/gnomeR/blob/master/vignettes/API-tutorial.Rmd"><code>vignettes/API-tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>API-tutorial.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AxelitoMartin/gnomeR">gnomeR</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></pre></div>
<div id="setting-up-the-api" class="section level1">
<h1 class="hasAnchor">
<a href="#setting-up-the-api" class="anchor"></a>Setting up the API</h1>
<p>In order to download the data from CbioPortal, one must first require a token from the website <a href="https://cbiologin.mskcc.org/">CbioPortal</a> wich will prompt a login page with your MSKCC credentials. Then navigate to “Web API” in the top bar menu, following this simply download a token and copy it after running the following command in R:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu">usethis</span><span class="fu">::</span><span class="fu">edit_r_environ</span><span class="op">(</span><span class="op">)</span></pre></div>
<p>And pasting the token you were given in the .Renviron file that was created and saving after pasting your token.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">CBIOPORTAL_TOKEN</span> <span class="op">=</span> <span class="st">'YOUR_TOKEN'</span></pre></div>
<p>You can test your connection using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu">get_cbioportal_token</span><span class="op">(</span><span class="op">)</span></pre></div>
</div>
<div id="datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#datasets" class="anchor"></a>Datasets</h1>
<p>There exist multiple datasets available in cbioPortal, and are available through our API:</p>
<ul>
<li>IMPACT (integrated mutation profiling of actionable cancer targets) dataset, which consist of multiple targeted panels on which all new MSKCC patients are sequencing.</li>
<li>TCGA (the cancer genomic atlas) dataset, which consist of a completed pan-cancer study of full exon sequencing.</li>
</ul>
<p>The <code>get_genetics()</code> function let’s the user download the mutation, fusion and copy-number alterations data in a Mutation Annotation Format (MAF) file for either the sample DMPID provided or a specific study. It takes the following arguments:</p>
<ul>
<li>sample_ids: A character vector of sample ids from either IMPACT or TCGA</li>
<li>sample_list_id: A character vector naming a pre-specified list of samples (e.g. <code>"mskimpact_Colorectal_Cancer"</code>)</li>
<li>genes: A list of genes to query. Default is all impact genes (recommended). A complete list of IDs can be found in the <code>impact_gene_info</code> dataset.</li>
<li>database: A character string of the database to be used. Options are “msk_impact” or “tcga”, default is “msk_impact”.</li>
<li>mutations: Boolean specifying if mutation data should be fected. Default is TRUE.</li>
<li>fusions: Boolean specifying if fusion data should be fected. Default is TRUE.</li>
<li>cna: Boolean specifying if cna data should be fected. Default is TRUE.</li>
<li>seg: Boolean specifying if the segmentatio data should be fetched. Default is FALSE.</li>
</ul>
<p>This function returns either a MAF file or a copy-number alterations summary file, or both (<code>mut</code> and/or <code>cna</code>).</p>
<div id="tcga-database" class="section level2">
<h2 class="hasAnchor">
<a href="#tcga-database" class="anchor"></a>TCGA database</h2>
<p>Even though cBioPortal mainly focuses on IMPACT data, other genomic studies are also available on it. Particurlarly the <a href="https://www.cancer.gov/about-nci/organization/ccg/research/structural-genomics/tcga">The Cancer Genome Atlas</a> (TCGA) database, which whole-exome sequenced large cohorts of 33 different cancer sites. This dataset is a public ressource and does not require a token to be accessed through the <code>gnomeR</code> API, we will thus use it as an example for the functionalities of the API. Additionally to having access to mutational and copy number alteration data, cBioPortal also grants us access to other data types such as RNA-seq or RPPMs. In this section we will show how the user can use the API to retrieve this data. Note that the list of samples, cancer sites and genes available in <code>tcga_samples</code> and <code>tcga_genes</code> respectively.</p>
<div id="mutations" class="section level3">
<h3 class="hasAnchor">
<a href="#mutations" class="anchor"></a>Mutations</h3>
<p>To retrieve the TCGA mutational data the user should set the arguments <code>mutations</code> to TRUE and <code>database</code> to “tcga”:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="co"># df &lt;- get_genetics(sample_ids =  c("TCGA-17-Z023-01","TCGA-02-0003-01","TCGA-02-0055-01"),</span>
<span class="co">#              mutations = TRUE,fusions = FALSE, cna = FALSE,</span>
<span class="co">#              database = "tcga")</span></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="co"># df$mut</span></pre></div>
</div>
<div id="fusions" class="section level3">
<h3 class="hasAnchor">
<a href="#fusions" class="anchor"></a>Fusions</h3>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co"># df &lt;- get_genetics(sample_ids = as.character(tcga_samples$patient_id[!is.na(tcga_samples$Cancer_Code)][1:100]),</span>
<span class="co">#                    mutations = TRUE,fusions = TRUE, cna = FALSE,</span>
<span class="co">#                    database = "tcga")</span></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="co"># df$mut %&gt;%</span>
<span class="co">#   filter(Variant_Classification == "Fusion")</span></pre></div>
</div>
<div id="cna" class="section level3">
<h3 class="hasAnchor">
<a href="#cna" class="anchor"></a>CNA</h3>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="co"># df &lt;- get_genetics(sample_ids =  c("TCGA-17-Z023-01","TCGA-02-0003-01","TCGA-02-0055-01"),</span>
<span class="co">#              mutations = FALSE,fusions = FALSE, cna = TRUE,</span>
<span class="co">#              database = "tcga")</span></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="co"># df$cna</span></pre></div>
</div>
<div id="segmentation-file" class="section level3">
<h3 class="hasAnchor">
<a href="#segmentation-file" class="anchor"></a>Segmentation file</h3>
<p>The copy-number alterations data we have covered up to now is a discrete estimation of the alterations that occured. There however exist more nuanced and accurate data for copy-number alterations observed in a tumor. In <code>gnomeR</code> we include an example of segmentation file and relevant functions from the <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5027494/"><code>facets</code></a> package that provides an allele-specific copy number and clonal heterogeneity analysis tool for high-throughput DNA sequencing. We show below how to download it from the API in gnomeR.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="co"># df &lt;- get_genetics(sample_ids =  c("TCGA-17-Z023-01","TCGA-02-0003-01","TCGA-02-0055-01"),</span>
<span class="co">#              mutations = FALSE,fusions = FALSE, cna = FALSE, seg = TRUE,</span>
<span class="co">#              database = "tcga")</span></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="co"># df$seg</span></pre></div>
</div>
</div>
<div id="impact-database" class="section level2">
<h2 class="hasAnchor">
<a href="#impact-database" class="anchor"></a>IMPACT database</h2>
<p>As mentioned previously IMPACT genomic data is protected and requires a token to be accessed. The <code>ger_genetics()</code> functions in the same way to the examples shown above for TCGA datasets.</p>
<div id="mutations-1" class="section level3">
<h3 class="hasAnchor">
<a href="#mutations-1" class="anchor"></a>Mutations</h3>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="co"># df.mut &lt;- get_genetics("P-0000062-T01-IM3",database = "msk_impact",</span>
<span class="co">#                        mutations = TRUE, fusions = FALSE, cna = FALSE)</span>
<span class="co"># df.mut</span></pre></div>
</div>
<div id="adding-fusions" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-fusions" class="anchor"></a>Adding Fusions</h3>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="co"># df.fus &lt;- get_genetics("P-0000062-T01-IM3",database = "msk_impact",</span>
<span class="co">#                        mutations = TRUE, fusions = FALSE, cna = FALSE)</span>
<span class="co"># df.fus</span></pre></div>
</div>
<div id="copy-number-alterations" class="section level3">
<h3 class="hasAnchor">
<a href="#copy-number-alterations" class="anchor"></a>Copy-number alterations</h3>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="co"># df.cna &lt;- get_genetics("P-0000062-T01-IM3",database = "msk_impact",</span>
<span class="co">#                        mutations = FALSE, fusions = FALSE, cna = TRUE)</span>
<span class="co"># df.cna</span></pre></div>
</div>
<div id="all-together" class="section level3">
<h3 class="hasAnchor">
<a href="#all-together" class="anchor"></a>All together</h3>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="co"># df.gen &lt;- get_genetics("P-0000062-T01-IM3",database = "msk_impact",</span>
<span class="co">#                        mutations = TRUE, fusions = TRUE, cna = TRUE)</span>
<span class="co"># df.gen</span></pre></div>
</div>
<div id="by-study" class="section level3">
<h3 class="hasAnchor">
<a href="#by-study" class="anchor"></a>By study</h3>
<p>We show here an example to retrieve all the samples in a study. A complete list of these studies can be found on the CbioPortal website. Not working yet.</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="co"># df.gen &lt;- get_genetics(sample_list_id = "mskimpact_Colorectal_Cancer",database = "msk_impact",</span>
<span class="co">#                        mutations = TRUE, fusions = TRUE, cna = TRUE)</span></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Axel Martin, Arshi Arora, Karissa Whiting, Margie Hannum.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
